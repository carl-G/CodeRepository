## 执行上下文

执行上下文我们比较常见的主要是全局执行上下文和函数执行上下文；
还一个是Eval执行上下文。不是很常用，按下不提；

### 全局执行上下文
全局执行上下文首先做的第一件事就是先挂载一个全局对象 window,并且将window 赋值给this;

### 什么是执行栈

执行栈就是调用栈，是一种LIFO(后进先出)数据结构的栈；用来储存代码执行是所创建的执行上下文

1.当Javascript引擎读到脚本文件的时候，首先创建一个全局执行上下文，然后压在执行栈最低层

2.然后没遇到一个函数执行上下文的时候，就创建一个函数执行上下文，放在执行栈最顶层

3.然后根据执行栈内部的顺序。从上到下一次执行上下文。

## 作用域链

### 作用域

作用域是指源代码定义的区域。
作用域确定了当前执行代码对变量的访问权限；
JavaScript使用的是静态作用域

### 静态作用域

因为JS使用过的是静态作用域，所以函数的作用域在定义的时候就确定了；
与之相对的是动态作用域，动态作用域的函数作用域是在函数调用的时候确定；

```
var value = 1;

function foo() {
    console.log(value);
}

function bar() {
    var value = 2;
    foo();
}

bar();

// 结果是 ???
```
接下来分别以静态作用域和动态作用域分析上述代码
静态作用域：
执行上下文时,因为是静态作用域，所以在定义foo方法的时候value的取值就已经确定了，foo里面的value 读取的是全局的value。所以是1
动态作用域:
执行上下文时,因为是动态作用域，所以在调用的时候才会去取值。先调用bar,执行bar的函数上下文，重新定义了value;之后再调用的foo;所以这时候foo的value是bar函数的最新取值。是2；

## 闭包

闭包就是在一个函数里面再声明一个函数，并且内部的函数可以调用外部函数体的变量

```
function demo() {
    let a = 1
    function bag() {
        let b = 2
        return a + b
    }
}
demo() // 3
```